import{a as B}from"./chunk-IYO7ZDBQ.js";import{a as x,b as G,c as J,d as K,e as U,f as X,g as Y,h as Z,i as tt,j as et,k as it,l as nt,m as ot,n as rt,o as at}from"./chunk-5UJUSGO2.js";import"./chunk-HM6S7YBJ.js";import{a as q}from"./chunk-PWI5DRZD.js";import{a as O,b as W}from"./chunk-J4GAYDVQ.js";import{k as P,p as F}from"./chunk-LWGMSCV3.js";import"./chunk-VN2TDJQ5.js";import{a as A,e as H,f as $}from"./chunk-WFAH5BXO.js";import{c as k,d as V,j as z,p as N}from"./chunk-4AMG6IFK.js";import{d as T}from"./chunk-LZDYDGZP.js";import{$b as L,Ba as d,Ca as w,Cb as E,Ra as s,Rd as Q,Sd as j,Ua as C,bb as r,cb as o,db as S,dc as R,eb as p,fb as u,ha as y,hb as h,kb as I,mb as f,oa as _,pa as g,qb as b,rb as v,sb as D,ub as c,wb as M}from"./chunk-KJHA3E4B.js";function mt(t,e){t&1&&(r(0,"th",12),c(1,"Id"),o())}function ct(t,e){if(t&1&&(r(0,"td",13),c(1),o()),t&2){let l=e.$implicit;d(),M(" ",l.id," ")}}function dt(t,e){t&1&&(r(0,"th",12),c(1,"Nom"),o())}function st(t,e){if(t&1&&(r(0,"td",13),c(1),o()),t&2){let l=e.$implicit;d(),M(" ",l.nom," ")}}function pt(t,e){t&1&&(r(0,"th",12),c(1,"Categorie"),o())}function ut(t,e){if(t&1&&(r(0,"td",13),c(1),o()),t&2){let l=e.$implicit,n=f();d(),M(" ",n.getCategoryLabel(l.category)," ")}}function ft(t,e){t&1&&(r(0,"th",12),c(1,"Nombre de recettes"),o())}function _t(t,e){if(t&1&&(r(0,"td",13),c(1),o()),t&2){let l=e.$implicit;d(),M(" ",l.recetteCount," ")}}function gt(t,e){t&1&&(r(0,"th",12),c(1,"Actions"),o())}function Ct(t,e){if(t&1){let l=h();r(0,"button",14),I("click",function(i){_(l);let a=f().$implicit,m=f();return g(m.openDeleteIngredientDialog(a,i))}),S(1,"mat-icon",17),o()}}function ht(t,e){if(t&1){let l=h();r(0,"td",13)(1,"button",14),I("click",function(i){let a=_(l).$implicit,m=f();return g(m.openEditIngredientDialog(a,i))}),S(2,"mat-icon",15),o(),s(3,Ct,2,0,"button",16),o()}if(t&2){let l=e.$implicit;d(3),C("ngIf",l.recetteCount===0)}}function It(t,e){t&1&&S(0,"tr",18)}function Mt(t,e){if(t&1){let l=h();r(0,"tr",19),I("click",function(){let i=_(l).$implicit,a=f();return g(a.handleRowClicked(i))}),o()}}var Nt=(()=>{let e=class e{constructor(n,i,a){this.service=n,this.dialog=i,this.router=a,this.dataSource=new at,this.displayedColumns=["nom","category","recetteCount","actions"],this.getCategoryLabel=z}ngAfterViewInit(){this.dataSource.sort=this.sort,this.dataSource.filterPredicate=this.filterPredicate.bind(this)}filterPredicate(n,i){return this.service.normalize(n.nom).includes(this.service.normalize(i))}ngOnInit(){this.getAllIngredientsWithRecetteCount()}getAllIngredientsWithRecetteCount(){this.service.getAllIngredientsWithRecetteCount().subscribe({next:n=>{this.dataSource.data=n}})}handleRowClicked(n){this.router.navigate(["ingredients",n.id])}applyFilter(n){let i=n.target.value;this.dataSource.filter=i.trim().toLowerCase()}openEditIngredientDialog(n,i){i.stopPropagation(),this.dialog.open(B,{data:{ingredient:n}}).afterClosed().subscribe(m=>{m&&this.getAllIngredientsWithRecetteCount()})}openDeleteIngredientDialog(n,i){i.stopPropagation(),this.dialog.open(q,{data:{title:"Supprimer un ingr\xE9dient"}}).afterClosed().subscribe(m=>{m&&this.service.deleteIngredient(n).subscribe({next:()=>{this.getAllIngredientsWithRecetteCount()}})})}};e.\u0275fac=function(i){return new(i||e)(w(N),w(P),w(T))},e.\u0275cmp=y({type:e,selectors:[["app-ingredient-list"]],viewQuery:function(i,a){if(i&1&&b(x,5),i&2){let m;v(m=D())&&(a.sort=m.first)}},standalone:!0,features:[E],decls:25,vars:3,consts:[["input",""],["matInput","",3,"keyup"],["matSort","","mat-table","",1,"mat-elevation-z8",3,"dataSource"],["matColumnDef","id"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","nom"],["matColumnDef","category"],["matColumnDef","recetteCount"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",3,"click",4,"matRowDef","matRowDefColumns"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-icon-button","","color","primary",3,"click"],["fontIcon","edit"],["mat-icon-button","","color","primary",3,"click",4,"ngIf"],["fontIcon","delete"],["mat-header-row",""],["mat-row","",3,"click"]],template:function(i,a){if(i&1){let m=h();r(0,"h1"),c(1,"Ingr\xE9dients"),o(),r(2,"mat-form-field")(3,"mat-label"),c(4,"Filtre"),o(),r(5,"input",1,0),I("keyup",function(lt){return _(m),g(a.applyFilter(lt))}),o()(),r(7,"table",2),p(8,3),s(9,mt,2,0,"th",4)(10,ct,2,1,"td",5),u(),p(11,6),s(12,dt,2,0,"th",4)(13,st,2,1,"td",5),u(),p(14,7),s(15,pt,2,0,"th",4)(16,ut,2,1,"td",5),u(),p(17,8),s(18,ft,2,0,"th",4)(19,_t,2,1,"td",5),u(),p(20,9),s(21,gt,2,0,"th",4)(22,ht,4,1,"td",5),u(),s(23,It,1,0,"tr",10)(24,Mt,1,0,"tr",11),o()}i&2&&(d(7),C("dataSource",a.dataSource),d(16),C("matHeaderRowDef",a.displayedColumns),d(),C("matRowDefColumns",a.displayedColumns))},dependencies:[R,L,rt,K,X,et,Y,U,it,Z,tt,nt,ot,J,x,G,$,H,A,W,O,V,k,j,Q,F],styles:['.mat-mdc-row[_ngcontent-%COMP%]{position:relative;cursor:pointer}.mat-mdc-row[_ngcontent-%COMP%]   .mat-mdc-cell[_ngcontent-%COMP%]:before{inset:0;position:absolute;content:"";opacity:0;pointer-events:none}.mat-mdc-row[_ngcontent-%COMP%]:hover   .mat-mdc-cell[_ngcontent-%COMP%]:before{background-color:var(--mdc-list-list-item-hover-state-layer-color);opacity:var(--mdc-list-list-item-hover-state-layer-opacity)}']});let t=e;return t})();export{Nt as IngredientListComponent};
