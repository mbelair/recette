import{$b as c,U as r,Y as o,ba as p,j as n,m as u,q as h}from"./chunk-OUFYTWEM.js";var d=(()=>{let i=class i{constructor(t){this.http=t,this.url="/api",this.allIngredients=new n(null),this.allTags=new n(null),this.recettes=new n(null)}getAllIngredients(t){return this.allIngredients.value?u(this.filterIngredients(t,this.allIngredients.value)):this.http.get(this.url+"/Ingredient").pipe(r({next:e=>{this.allIngredients.next(e)}}),h(e=>this.filterIngredients(t,e)))}getAllTags(t){return this.allTags.value?u(this.filterTags(t,this.allTags.value)):this.http.get(this.url+"/Tag").pipe(r({next:e=>{this.allTags.next(e)}}),h(e=>this.filterTags(t,e)))}filterTags(t,e){if(t){let s=this.normalize(t);return e.filter(a=>this.normalize(a.nom).includes(s))}else return e}filterIngredients(t,e){if(t){let s=this.normalize(t);return e.filter(a=>this.normalize(a.nom).includes(s))}else return e}normalize(t){return t.normalize("NFD").replace(/[\u0300-\u036f]/g,"").toLocaleLowerCase()}createIngredient(t){return this.http.post(this.url+"/Ingredient",t).pipe(r({next:()=>{this.allIngredients.next(null)}}))}createRecette(t){return this.http.post(this.url+"/Recette",t).pipe(r({next:()=>{this.recettes.next(null)}}))}getAllRecettes(){return this.recettes.value?this.recettes:this.http.get(this.url+"/Recette").pipe(r({next:t=>{this.recettes.next(t)}}))}getRecette(t){return this.http.get(this.url+"/Recette/"+t)}};i.\u0275fac=function(e){return new(e||i)(p(c))},i.\u0275prov=o({token:i,factory:i.\u0275fac,providedIn:"root"});let l=i;return l})();export{d as a};
